<!doctype html><!-- webkit-test-runner [ dumpJSConsoleLogInStdErr=true ] -->
<script>
    function runTest() {
        if (window.testRunner)
            window.testRunner.dumpAsText();

        marqueeElement.addEventListener("DOMSubtreeModified", () => {
            try { hrElement.before(hrElement); } catch (e) { }
            marqueeElement.normalize();
        });

        marqueeElement.setAttribute("a", "");
    }
</script>

<body onload=runTest()>
This test passes if it does not crash.

    <marquee id="marqueeElement">
        <hr id="hrElement" width="1"></hr>
